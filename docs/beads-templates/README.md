# Beads Templates

Эта директория содержит шаблоны для создания задач в системе beads.

## Шаблоны

### `issue-template.md`

Шаблон для создания задач с разделом "Контекст". Используется для сохранения информации между сессиями работы.

## Использование

### Вариант 1: Использование шаблона с `--body-file`

```bash
# Скопировать шаблон и отредактировать
cp .beads/templates/issue-template.md my-issue.md
# [Редактировать my-issue.md]

# Создать задачу из файла
bd create --title="Название задачи" --body-file=my-issue.md --type=task --priority=2
```

### Вариант 2: Использование `--description` напрямую

```bash
bd create --title="Название задачи" \
          --type=task \
          --priority=2 \
          --description="Описание задачи с контекстом"
```

### Вариант 3: Использование `--file` для нескольких задач

Создать файл `issues.md` с несколькими задачами в формате:

```markdown
# Задача 1
Тип: task
Приоритет: 2
Описание: Описание задачи 1

# Задача 2
Тип: bug
Приоритет: 1
Описание: Описание задачи 2
```

Затем создать задачи:

```bash
bd create --file=issues.md
```

## Важно: Только для новых задач

**Этот шаблон применяется ТОЛЬКО для новых задач.**

Существующие задачи (44 из 45) остаются без изменений - добавлять контекст в них НЕ нужно.

### Обязательные поля для новых задач:

- **Предыстория**: Почему эта задача важна? Какая проблема решается?
- **Связанные файлы**: Какие файлы затрагиваются?

### Опциональные поля:

- **Связанные сессии**: Ссылки на сессии работы (дата, описание)
- **Связанные проблемы**: Зависимости от других проблем

### При закрытии задачи:

Добавить в раздел "Результаты":
- **Реализовано**: Что было сделано
- **Commit/PR**: Ссылка на изменения
- **Примечания**: Дополнительная информация

## Пример заполненного шаблона

```markdown
# Добавить копирование токенов существ

## Тип
bug

## Приоритет
P2

## Описание
Скрипт реорганизации данных не копирует токены существ из `img/bestiary/tokens/`

## Контекст

**Связанные сессии:**
- 2026-01-18: Обнаружено при тестировании реорганизации данных

**Связанные проблемы:**
- Потеря данных: 668MB токенов не копируются
- 472 директории источников затронуты

**Связанные файлы:**
- `scripts/reorganize/image_copier.py` - нужно добавить функцию копирования токенов
- `img/bestiary/tokens/` - исходные токены
- `data_rework/*/img/bestiary/tokens/` - целевые директории

**Предыстория:**
При тестировании скрипта реорганизации данных обнаружено, что токены существ не копируются. Токены используются в инструменте для создания портретов существ и их потеря критична для пользователей.

## Задачи
- [ ] Добавить `_copy_tokens_for_source()` функцию
- [ ] Обновить `_copy_category_images()` для вызова функции токенов
- [ ] Протестировать на PS-K (4576 токенов)
- [ ] Запустить на всех источниках

## Критерии завершения
- Все токены скопированы в data_rework/
- 0 ошибок при копировании
- Отчёт о количестве скопированных токенов

## Результаты

**Реализовано:**
- Добавлена функция `_copy_tokens_for_source()` в image_copier.py
- Обновлена логика `_copy_category_images()` для обработки категории 'bestiary'
- Протестировано на PS-K: 4576 токенов скопировано

**Commit/PR:**
- Commit: 3b54e04

**Примечания:**
- Все источники успешно обработаны
- Покрытие изображений: 101.9% (включая токены)
```

## Почему важен контекст?

Раздел "Контекст" помогает:

1. **Восстановить предысторию** через длительное время
2. **Понять причины** создания задачи (не только что сделать, но и почему)
3. **Связать сессии работы** - избежать потери информации при compaction
4. **Отследить зависимости** между файлами, проблемами и решениями

Это критически важно для длительных проектов (5etools-src).
